{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/routes/baseRouter.ts","webpack:///external \"mongoose\"","webpack:///./src/db/apiUserSchema.ts","webpack:///./src/db/dataAccess.ts","webpack:///external \"uuid\"","webpack:///./src/db/validClientSchema.ts","webpack:///external \"jsonwebtoken\"","webpack:///external \"mongoose-unique-validator\"","webpack:///./src/db/userTypeSchema.ts","webpack:///./src/controllers/baseController.ts","webpack:///./src/models/userType.ts","webpack:///external \"ejs\"","webpack:///external \"crypto\"","webpack:///external \"crypto-js\"","webpack:///./node_modules/process/browser.js","webpack:///external \"express\"","webpack:///external \"body-parser\"","webpack:///./src/app.ts","webpack:///external \"cors\"","webpack:///external \"morgan\"","webpack:///external \"helmet\"","webpack:///./src/routes/indexRouter.ts","webpack:///./src/middleware/validateRequest.ts","webpack:///./src/routes/mailRouter.ts","webpack:///./src/controllers/mailController.ts","webpack:///./node_modules/path-browserify/index.js","webpack:///external \"email-templates\"","webpack:///external \"nodemailer\"","webpack:///./src/db/durationSchema.ts","webpack:///./src/models/duration.ts","webpack:///./src/controllers/durationController.ts","webpack:///./src/routes/durationRouter.ts","webpack:///./src/db/serviceSchema.ts","webpack:///./src/models/service.ts","webpack:///./src/controllers/serviceController.ts","webpack:///./src/routes/serviceRoute.ts","webpack:///./src/models/clientInfo.ts","webpack:///./src/controllers/clientController.ts","webpack:///./src/routes/clientInfoRouter.ts","webpack:///./src/models/validClient.ts","webpack:///./src/controllers/validClientController.ts","webpack:///./src/routes/validClientRouter.ts","webpack:///./src/models/apiUser.ts","webpack:///./src/controllers/apiUserController.ts","webpack:///./src/routes/apiUserRouter.ts","webpack:///./src/controllers/loginController.ts","webpack:///./src/routes/loginRouter.ts","webpack:///./src/controllers/userTypeController.ts","webpack:///./src/routes/userTypeRouter.ts","webpack:///./src/index.ts","webpack:///external \"mail\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","BaseRoute","this","title","responseData","req","res","data","locals","BASE_URL","status","send","require","_dataAccess__WEBPACK_IMPORTED_MODULE_0__","_config_db_config_json__WEBPACK_IMPORTED_MODULE_1__","mongoose__WEBPACK_IMPORTED_MODULE_2__","mongoose_unique_validator__WEBPACK_IMPORTED_MODULE_3__","crypto__WEBPACK_IMPORTED_MODULE_4__","jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__","ApiUserSchema","_schema","id","type","String","index","required","username","lowercase","match","unique","email","firstName","lastName","salt","password_hash","userTypeId","Types","ObjectId","ref","active","Boolean","default","tokenValidated","validationToken","timestamps","plugin","message","methods","matchPasswordCriteria","password","expiresIn","days","_date","Date","setDate","getDate","setPassword","toString","hash","update","hashValue","digest","console","error","generateValidationToken","_expires","_token","exp","_a","validPassword","model","dbConnection","schema","process","mongoose__WEBPACK_IMPORTED_MODULE_0__","DataAccess","connect","_this","options","useNewUrlParser","useCreateIndex","useFindAndModify","autoIndex","autoReconnect","reconnectTries","Number","MAX_VALUE","reconnectInterval","poolSize","bufferMaxEntries","connectTimeoutMS","socketTimeoutMS","family","user","pass","dbName","dbInstance","Promise","resolve","reject","establish","instance","_conn","once","log","on","err","close","then","catch","mongoose_unique_validator__WEBPACK_IMPORTED_MODULE_2__","mongoose__WEBPACK_IMPORTED_MODULE_3__","jsonwebtoken__WEBPACK_IMPORTED_MODULE_4__","UserTypeSchema","ipAddress","validate","description","contactName","phoneNumber","token","retuired","today","_exp","getFullYear","_id","address","getTime","mongoose_unique_validator__WEBPACK_IMPORTED_MODULE_1__","display","BaseController","_config_transport_config_json__WEBPACK_IMPORTED_MODULE_0__","crypto_js__WEBPACK_IMPORTED_MODULE_1__","encryptData","encrypt","decryptData","decrypt","Utf8","mongoIdObject","UserType","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","args","Array","arguments","push","apply","browser","env","argv","version","versions","addListener","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","express__WEBPACK_IMPORTED_MODULE_0__","cors__WEBPACK_IMPORTED_MODULE_1__","morgan__WEBPACK_IMPORTED_MODULE_2__","body_parser__WEBPACK_IMPORTED_MODULE_3__","helmet__WEBPACK_IMPORTED_MODULE_4__","_routes_indexRouter__WEBPACK_IMPORTED_MODULE_5__","_middleware_validateRequest__WEBPACK_IMPORTED_MODULE_6__","_routes_loginRouter__WEBPACK_IMPORTED_MODULE_7__","_routes_userTypeRouter__WEBPACK_IMPORTED_MODULE_8__","_routes_apiUserRouter__WEBPACK_IMPORTED_MODULE_9__","_routes_validClientRouter__WEBPACK_IMPORTED_MODULE_10__","_routes_serviceRoute__WEBPACK_IMPORTED_MODULE_11__","_routes_durationRouter__WEBPACK_IMPORTED_MODULE_12__","_routes_clientInfoRouter__WEBPACK_IMPORTED_MODULE_13__","_routes_mailRouter__WEBPACK_IMPORTED_MODULE_14__","ejs__WEBPACK_IMPORTED_MODULE_15__","App","server","engine","set","configureMiddleware","routes","use","extended","disable","all","router","map","port","host","listen","IndexRoute","_super","__extends","next","_baseRouter__WEBPACK_IMPORTED_MODULE_0__","ValidateRequest","jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__","_db_validClientSchema__WEBPACK_IMPORTED_MODULE_2__","body","access_token","query","headers","trim","forwarded","connection","remoteAddress","_decoded","now","findById","MailRoute","post","_controllers_mailController__WEBPACK_IMPORTED_MODULE_1__","MailController","_result","sendMail","transporter","nodemailer__WEBPACK_IMPORTED_MODULE_3__","service","auth","_tempDir","path__WEBPACK_IMPORTED_MODULE_1__","__dirname","_email","email_templates__WEBPACK_IMPORTED_MODULE_2__","from","transport","views","extension","_html","ejs__WEBPACK_IMPORTED_MODULE_4__","userName","juiceResources","_baseController__WEBPACK_IMPORTED_MODULE_0__","normalizeArray","parts","allowAboveRoot","up","last","splice","unshift","splitPathRe","splitPath","filename","exec","slice","filter","xs","f","resolvedPath","resolvedAbsolute","path","TypeError","charAt","split","join","normalize","isAbsolute","trailingSlash","substr","paths","relative","to","arr","start","end","fromParts","toParts","Math","min","samePartsLength","outputParts","sep","delimiter","dirname","result","root","basename","ext","extname","str","durationSchema_DurationSchema","DurationSchema","external_mongoose_","price","external_mongoose_unique_validator_","durationSchema","dataAccess","durationController","DurationController","getAll","find","_data","mapItems","getOne","params","mapItem","_model","duration","external_uuid_","disp","findByIdAndUpdate","deactivate","durationRouter_DurationRoute","DurationRoute","put","delete","baseRouter","serviceSchema_ServiceSchema","ServiceSchema","shortDescription","serviceSchema","serviceController","ServiceController","shortDesc","serviceRoute_ServiceRoute","ServiceRoute","clientController","clientInfo","hostname","ip","forwared","clientInfoRouter_ClientInfoRoute","ClientInfoRoute","validClientController","ValidClientController","validClientSchema","contactname","ipaddress","phonenumber","fdnq","validClient","validClientRouter_ValidClientRoute","ValidClientRoute","apiUserController","ApiUserController","apiUserSchema","aggregate","$match","$lookup","localField","foreignField","as","$sort","$limit","_targetType_1","userTypeSchema","findOne","_firstName","_lastName","apiUser","JSON","parse","stringify","_type","userType","baseController","apiUserRouter_ApiUserRoute","ApiUserRoute","apiUserRouter_extends","controllers_loginController","loginController","login","resetPassword","validateEmailToken","external_jsonwebtoken_","db_config","loginRouter_LoginRoute","LoginRoute","loginRouter_extends","userTypeController","UserTypeController","desc","_userType","userTypeRouter_UserTypeRoute","UserTypeRoute"],"mappings":"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","file":"tyler.api.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 37);\n","import {NextFunction, Request, Response} from 'express';\n\nexport class BaseRoute {\n    protected title: string;\n\n    constructor() {\n        this.title = \"Welcome to Tyler-CMT Api\";\n    }\n\n   \n\n    public responseData(req: Request, res: Response, data?: Object) {\n        res.locals.BASE_URL = \"/\";\n        res.locals.title = this.title;\n        res.status(200);\n        res.send(data);\n    }\n}","module.exports = require(\"mongoose\");","import { IApiUser } from \"./interfaces\";\nimport dataAccess from \"./dataAccess\";\nimport * as configInfo from \"../config/db.config.json\";\nimport * as mongoose from \"mongoose\";\nimport * as validator from \"mongoose-unique-validator\";\nimport * as crypto from \"crypto\";\nimport * as jwt from \"jsonwebtoken\";\n\nexport class ApiUserSchema {\n  salt?: string;\n  password_hash?: string;\n  id?: mongoose.Types.ObjectId;\n  username?: string;\n  email?: string;\n  firstName?: string;\n  userTypeId?: mongoose.Types.ObjectId;\n  lastName?: string;\n  active?: boolean;\n  emailValidated?: boolean;\n\n  public get schema(): mongoose.Schema {\n    const _schema = new mongoose.Schema(\n      {\n        id: {\n          type: String,\n          index: true,\n          required: [true, \"is required\"]\n        },\n        username: {\n          type: String,\n          lowercase: true,\n          required: [true, \"is required\"],\n          match: [/[a-zA-Z0-9-_]{5,20}\\w+/, \"is invalid\"],\n          unique: true,\n          index: true\n        },\n        email: {\n          type: String,\n          lowercase: true,\n          required: [true, \"is required\"],\n          match: [/\\S+@\\S+\\.\\S+/, \"is invalid\"],\n          unique: true,\n          index: true\n        },\n        firstName: {\n          type: String,\n          required: [true, \"is required\"],\n          index: true\n        },\n        lastName: {\n          type: String,\n          required: [true, \"is required\"],\n          index: true\n        },\n        salt: {\n          type: String\n        },\n        password_hash: {\n          type: String,\n          index: true\n        },\n        userTypeId: {\n          type: mongoose.Schema.Types.ObjectId,\n          required: true,\n          index: true,\n          ref: 'UserTypes',\n        },\n        active: {\n          type: Boolean,\n          default: true\n        },\n        tokenValidated: {\n          type: Boolean,\n          default: false\n        },\n        validationToken: {\n          type: String,\n          index: true\n        }\n      },\n      { timestamps: true }\n    );\n\n    _schema.plugin(validator, { message: \"is already taken\" });\n\n    _schema.methods.matchPasswordCriteria = function(\n      password: string\n    ): RegExpMatchArray | null {\n      return password.match(configInfo.passwordMatchCriteria);\n    };\n\n    _schema.methods.expiresIn = (days: number): number => {\n      const _date = new Date();\n      return _date.setDate(_date.getDate() + days);\n    };\n\n    _schema.methods.setPassword = function(password: string): boolean {\n      if (_schema.methods.matchPasswordCriteria(password)) {\n        \n        this.salt = crypto.randomBytes(16).toString(\"hex\");\n        \n        const hash = crypto.createHmac('sha512', this.salt);\n        hash.update(password);\n        var hashValue = hash.digest('hex');\n\n        if(!hashValue) return false;\n\n        this.password_hash = hashValue;\n\n        return true;\n      } else {\n        console.error(\"password\", \"does not match criteria\");\n        return false;\n      }\n    };\n\n    _schema.methods.generateValidationToken = function() {\n      const _expires = _schema.methods.expiresIn(1);\n\n      try {\n        const _token = jwt.sign(\n          {\n            username: this.username,\n            exp: _expires\n          },\n          configInfo.secret\n        );\n\n        this.tokenValidated = false;\n        this.validationToken = _token;\n\n        return _token;\n      } catch {\n        return null;\n      }\n    };\n\n    _schema.methods.validPassword = function(password: string): boolean {\n      if (!password) return false;\n      const hash = crypto.createHmac('sha512', this.salt);\n      hash.update(password);\n      var hashValue = hash.digest('hex');\n      return this.password_hash === hashValue;\n    };\n\n    return _schema;\n  }\n}\n\nconst model = dataAccess.dbConnection.model<IApiUser>(\n  \"apiUsers\",\n  new ApiUserSchema().schema\n);\nexport default model;\n","import * as mongoose from \"mongoose\";\nimport * as dbConfig from \"../config/db.config.json\";\n\nexport class DataAccess {\n  public static dbConnection: mongoose.Connection;\n  private static dbInstance: Promise<typeof mongoose>;\n\n  static connect() {\n    const options = {\n      useNewUrlParser: true,\n      useCreateIndex: true,\n      useFindAndModify: false,\n      autoIndex: false, // Don't build indexes\n      autoReconnect: true,\n      reconnectTries: Number.MAX_VALUE, // Never stop trying to reconnect\n      reconnectInterval: 500, // Reconnect every 500ms\n      poolSize: 10, // Maintain up to 10 socket connections\n      // If not connected, return errors immediately rather than waiting for reconnect\n      bufferMaxEntries: 0,\n      connectTimeoutMS: 10000, // Give up initial connection after 10 seconds\n      socketTimeoutMS: 45000, // Close sockets after 45 seconds of inactivity\n      family: 4, // Use IPv4, skip trying IPv6\n      user: dbConfig.mongoUser,\n      pass: dbConfig.mongoPass,\n      dbName: dbConfig.mongoDb\n    };\n\n    const connection = () => {\n      return new Promise((resolve, reject) => {\n        const establish = (instance: Promise<typeof mongoose>) => {\n          const _conn = mongoose.connect(dbConfig.mongoEndpoint, options);\n\n          if (_conn) {\n            reject(\"DB connection failure\");\n          } else {\n            instance = _conn;\n            resolve(\"connected\");\n          }\n        };\n\n        this.dbConnection = mongoose.connection;\n        this.dbConnection.once(\"open\", () => {\n          console.log(\"Connected to mongodb\");\n        });\n\n        this.dbConnection.on(\"error\", err => {\n          console.error(\n            `Mongoode default connection has occured  ${err} error`\n          );\n        });\n\n        mongoose.connection.once(\"disconnected\", () => {\n          console.log(\"Mongoose default connection disconnected\");\n          establish(this.dbInstance);\n        });\n\n        mongoose.connection.once(\"reconnected\", () => {\n          console.log(\"Mongoose default connection reconnected\");\n        });\n\n        process.on(\"SIGINT\", () => {\n          this.dbConnection.close(() => {\n            console.log(\"db connection\", \"Mongoose default connection\");\n          });\n        });\n\n        establish(this.dbInstance);\n      });\n    };\n\n    if (this.dbInstance) {\n      return this.dbInstance;\n    } else {\n      connection()\n        .then(() => {\n          return this.dbInstance;\n        })\n        .catch((err: Error) => {\n          return err;\n        });\n    }\n\n    return null;\n  }\n}\n\nDataAccess.connect();\nexport default DataAccess;\n","module.exports = require(\"uuid\");","import { IValidClient } from \"./interfaces\";\nimport dataAccess from \"./dataAccess\";\nimport * as configInfo from \"../config/db.config.json\";\nimport * as validator from \"mongoose-unique-validator\";\nimport * as mongoose from \"mongoose\";\nimport * as jwt from \"jsonwebtoken\";\n\nexport class UserTypeSchema {\n  id?: string;\n  ipAddress?: string;\n  name?: string;\n  description?: string;\n  contactName?: string;\n  email?: string;\n  phoneNumber?: number;\n  token?: string;\n  active?: boolean;\n\n  public get schema(): mongoose.Schema {\n    const _schema = new mongoose.Schema(\n      {\n        id: {\n          type: String,\n          index: true,\n          required: [true, \"is required\"]\n        },\n        ipAddress: {\n          type: String,\n          required: [true, \"is required\"],\n          validate: [\n            /^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,\n            \"is invalid\"\n          ],\n          index: true\n        },\n        name: {\n          type: String,\n          required: [true, \"is required\"],\n          lowercase: true,\n          unique: true\n        },\n        description: {\n          type: String,\n          required: [true, \"is required\"]\n        },\n        contactName: {\n          type: String,\n          required: [true, \"is required\"]\n        },\n        email: {\n          type: String,\n          lowercase: true,\n          required: [true, \"is required\"],\n          validate: [/\\S+@\\S+\\.\\S+/, \"is invalid\"],\n          index: true\n        },\n        phoneNumber: {\n          type: String,\n          required: [true, \"is required\"],\n          validate: [\n            /^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,\n            \"is invalid\"\n          ],\n          index: true\n        },\n        token: {\n          type: String,\n          index: true\n        },\n        active: {\n          type: Boolean,\n          retuired: true,\n          required: [true, \"is required\"]\n        }\n      },\n      { timestamps: true }\n    );\n\n    _schema.plugin(validator, { message: \"is already taken\" });\n\n    _schema.methods.generateValidationToken = function() {\n      const today = new Date();\n      let _exp = new Date(today);\n      _exp.setDate(today.getFullYear() + 5);\n\n      try {\n        const _token = jwt.sign(\n          {\n            id: this._id,\n            address: this.ipAddress,\n            exp: _exp.getTime()\n          },\n          configInfo.secret\n        );\n\n        this.token = _token;\n\n        return _token;\n      } catch {\n        return null;\n      }\n    };\n\n    return _schema;\n  }\n}\n\nconst model = dataAccess.dbConnection.model<IValidClient>(\n  \"ValidClients\",\n  new UserTypeSchema().schema\n);\nexport default model;\n","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"mongoose-unique-validator\");","import { IUserType } from \"./interfaces\";\nimport dataAccess from \"./dataAccess\";\nimport * as validator from \"mongoose-unique-validator\";\nimport * as mongoose from \"mongoose\";\n\nexport class UserTypeSchema {\n  id?: string;\n  display?: string;\n  description?: string;\n  active?: boolean;\n\n  public get schema(): mongoose.Schema {\n    const _schema = new mongoose.Schema(\n      {\n        id: {\n          type: String,\n          index: true,\n          required: [true, \"is required\"]\n        },\n        display: {\n          type: String,\n          required: [true, \"is required\"],\n          lowercase: true,\n          unique: true\n        },\n        description: {\n          type: String,\n          required: [true, \"is required\"]\n        },\n        active: {\n          type: Boolean,\n          retuired: true,\n          required: [true, \"is required\"]\n        }\n      },\n      { timestamps: true }\n    );\n\n    _schema.plugin(validator, { message: \"is already taken\" });\n\n    return _schema;\n  }\n}\n\nconst model = dataAccess.dbConnection.model<IUserType>(\n  \"UserTypes\",\n  new UserTypeSchema().schema\n);\nexport default model;\n","import * as transportConfig from '../config/transport.config.json'\nimport * as crypto from 'crypto-js'\nimport {Types} from \"mongoose\";\n\n\nexport  class BaseController {\n    constructor() {\n    }\n\n    protected encryptData(data: string): string {\n        var _data = crypto.AES.encrypt(data, transportConfig.transportSecret);\n        return _data.toString();\n    }\n\n    protected decryptData(data: string): string {\n        var _data = crypto.AES.decrypt(data, transportConfig.transportSecret);\n        var _plaintext = _data.toString(crypto.enc.Utf8);\n        return _plaintext;\n    }\n\n    protected mongoIdObject(data: string) {\n        var _id = Types.ObjectId(data);\n        return _id;\n    }\n}\n\nexport default new BaseController();","export default class UserType {\n    id?: string;\n    display?: string;\n    description?: string;\n    active?: boolean;\n  }\n  ","module.exports = require(\"ejs\");","module.exports = require(\"crypto\");","module.exports = require(\"crypto-js\");","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = require(\"express\");","module.exports = require(\"body-parser\");","import * as express from 'express'\nimport * as cors from 'cors';\nimport * as logger from 'morgan';\nimport * as bodyParser from 'body-parser';\nimport * as helmet from 'helmet';\nimport { IndexRoute } from './routes/indexRouter';\nimport { ValidateRequest } from './middleware/validateRequest';\nimport { LoginRoute } from './routes/loginRouter';\nimport { UserTypeRoute } from './routes/userTypeRouter';\nimport { ApiUserRoute } from './routes/apiUserRouter';\nimport { ValidClientRoute } from './routes/validClientRouter';\nimport { ServiceRoute } from './routes/serviceRoute';\nimport { DurationRoute } from './routes/durationRouter';\nimport { ClientInfoRoute } from './routes/clientInfoRouter';\nimport { MailRoute } from './routes/mailRouter';\nimport * as ejs from 'ejs';\n\nexport class App {\n  private server: express.Application;\n  \n  constructor() {\n    process.title = \"tyler-cmt-api\";\n    this.server = express();\n    this.server.engine('html', ejs.renderFile);\n    this.server.set('view engine', 'html');\n    this.server.set('view engine', 'ejs');\n    this.configureMiddleware();\n    this.routes();\n  }\n\n  private configureMiddleware() {\n    this.server.use(logger('dev'));\n    this.server.use(bodyParser.urlencoded({ extended: false }));\n    this.server.use(bodyParser.json()); \n    this.server.use(helmet());\n    this.server.disable('x-powered-by');\n    this.server.all('/*', cors());\n    this.server.all('/v1/*', ValidateRequest.validate);\n  }\n\n  private routes() {\n    \n    const router = express.Router();\n\n    ClientInfoRoute.map(router);\n    MailRoute.map(router);\n    IndexRoute.map(router);\n    LoginRoute.map(router);\n    ApiUserRoute.map(router);\n    UserTypeRoute.map(router);\n    ValidClientRoute.map(router);\n    ServiceRoute.map(router);\n    DurationRoute.map(router);\n    \n    this.server.use(router);\n    \n  }\n\n  public run(port: number, host: string) {\n    this.server.listen(port, host, () => {\n      console.log(`listening on port: ${port}`);\n    });\n  }\n\n}\n\nexport default new App();","module.exports = require(\"cors\");","module.exports = require(\"morgan\");","module.exports = require(\"helmet\");","import { BaseRoute } from \"./baseRouter\";\nimport { Router, Request, Response, NextFunction } from \"express\";\n\nexport class IndexRoute extends BaseRoute {\n   \n    constructor() {\n        super();\n    }\n\n    public static map(router: Router) {\n        router.get('/', (req: Request, res: Response, next: NextFunction) => {\n            new IndexRoute().index(req, res, next);\n        });\n    }\n\n    public index(req: Request, res: Response, next: NextFunction) {\n        this.title = 'Index | Tyler-CMT';\n\n        let data: Object = {\n            \"message\": \"Welcome!\"\n        }\n\n        this.responseData(req, res, data);\n    }\n}","import { NextFunction, Request, Response } from \"express\";\nimport * as jwt from \"jsonwebtoken\";\nimport * as config from \"../config/db.config.json\";\nimport { IDecoded, IApiUser } from \"../db/interfaces.js\";\nimport Schema from \"../db/validClientSchema\";\n\nexport class ValidateRequest {\n  static validate(req: Request, res: Response, next: NextFunction) {\n    const token = (\n      (req.body && req.body.access_token) ||\n      (req.query && req.query.access_token) ||\n      req.headers[\"x_access_token\"]\n    )\n      .toString()\n      .trim();\n\n    const address =\n      req.headers && req.headers.forwarded\n        ? req.headers.forwarded\n        : req.connection.remoteAddress;\n\n    if (!token || !address) {\n      return res.status(400).send({ message: \"Invalid token or address\" });\n    } else {\n      try {\n        const _decoded = <IDecoded>jwt.verify(token, config.secret);\n        if (!_decoded) {\n          return res.status(400).send({ message: \"Decoding error\" });\n        } else {\n          if (_decoded.exp <= Date.now()) {\n            return res.status(400).send({ message: \"Token Expired\" });\n          }\n\n          if (address !== _decoded.address) {\n            return res.status(400).send({ message: \"Unauthorized address\" });\n          }\n\n          Schema.findById(_decoded.id, (err: Error, data: IApiUser) => {\n            if (err) return res.status(400).send(err.message);\n\n            if (data && data.active) {\n              return next();\n            } else {\n              return res.status(417).send({ message: \"Inactive token\" });\n            }\n          });\n\n          return;\n        }\n      } catch (err) {\n        return res.status(400).send({ message: err.message });\n      }\n    }\n  }\n}\n\nexport default new ValidateRequest();\n","import { BaseRoute } from \"./baseRouter\";\nimport { Router} from \"express\";\nimport controller from \"../controllers/mailController\";\n\nexport class MailRoute extends BaseRoute {\n   \n    constructor() {\n        super();\n    }\n\n    public static map(router: Router) {\n        router.post('/mail/send', controller.send);\n    }\n}","import { BaseController } from \"./baseController\";\nimport * as path from 'path';\nimport * as emailTemplate from 'email-templates';\nimport * as mailer from 'nodemailer';\nimport * as ejs from 'ejs';\nimport { Request, Response } from \"express\";\n\nconst mail = require('mail');\n\nexport class MailController extends BaseController {\n    transporter: typeof mail;\n    constructor() {\n        super();\n        this.transporter = mailer.createTransport({\n            service: 'GMAIL',\n            auth: {\n                user: 'kulfiapp@gmail.com',\n                pass: '@2Terravista'\n            }\n        });\n    }\n    \n    send = (req:Request, res: Response) => {\n        var _result = this.sendMail();\n\n        if( typeof _result === \"boolean\") {\n            if(_result)\n                return res.status(200).send({message: 'sent email'});\n            else\n                return res.status(400).send({message: 'send email failed'});\n        } \n\n        if( typeof _result === typeof Error) {\n            return res.status(400).send({message: _result.message})\n        }\n\n        return res.status(444).send({message: 'type check failed'}); \n    };\n\n    private sendMail(): boolean | Error {\n        \n        const _tempDir = path.join(__dirname, '../email-templates', 'greetings.html')\n        try {\n\n            let _email= new emailTemplate({\n                message: {\n                    from: 'kulfiapp@gmail.com'\n                },\n                transport: this.transporter,\n                views: {\n                    options: {\n                        extension: 'ejs'\n                    }\n                }\n            });\n    \n    \n            const _locals = {\n                userName: 'Tester-Ashish'\n            }\n\n           \n            let _html = ejs.render(_tempDir, _locals);\n            _email.juiceResources(_html)\n            .then(console.log)\n            .catch(console.error);\n\n            \n            \n    \n            // let _options = {\n            //     template: _tempDir,\n            //     message: {\n            //         to: 'ashish@ashishc.io',\n            //         subject: 'template test',\n            //         html: ejs.renderFile(_tempDir, _locals)\n            //     },\n            //     locals: {\n            //         userName: 'tester-user'\n            //     }\n            // }\n            // _email.send(_options)\n            // .then(console.log)\n            // .catch(console.error);\n\n    \n            return true\n        }\n        catch(err) {\n            return err;\n        }\n        \n        \n    }\n}\n\nexport default new MailController();\n\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","module.exports = require(\"email-templates\");","module.exports = require(\"nodemailer\");","import { IDuration } from \"./interfaces\";\nimport dataAccess from \"./dataAccess\";\nimport * as validator from \"mongoose-unique-validator\";\nimport * as mongoose from \"mongoose\";\n\nexport class DurationSchema {\n  id?: string;\n  display?: string;\n  price?: number;\n  active?: boolean;\n\n  public get schema(): mongoose.Schema {\n    const _schema = new mongoose.Schema(\n      {\n        id: {\n          type: String,\n          required: [true, \"is required\"],\n          index: true\n        },\n        display: {\n          type: String,\n          require: [true, \"is required\"],\n          unique: true,\n          lowercase: true\n        },\n        price: {\n          type: Number,\n          require: [true, \"is required\"],\n          unique: true\n        },\n        active: {\n          type: Boolean,\n          required: [true, \"is required\"],\n          default: true\n        }\n      },\n      { timestamps: true }\n    );\n\n    _schema.plugin(validator, { message: \"is already taken\" });\n\n    return _schema;\n  }\n}\n\nconst model = dataAccess.dbConnection.model<IDuration>(\n  \"Duration\",\n  new DurationSchema().schema\n);\nexport default model;\n","export default class Duration {\n    id?: string;\n    display?: string;\n    price?: number;\n    active?: boolean;\n  }\n  ","import { Request, Response } from \"express\";\nimport * as uuid from \"uuid\";\nimport Schema from \"../db/durationSchema\";\nimport { IDuration } from \"../db/interfaces\";\nimport Duration from \"../models/duration\";\n\nexport class DurationController {\n  constructor() {}\n\n  private mapItems(model: IDuration[]): Duration[] {\n    let _data = [];\n    for (let i = 0; i < model.length; i++) {\n      _data.push(this.mapItem(model[i]));\n    }\n    return _data;\n  }\n\n  private mapItem(model: IDuration): Duration {\n    const _data = new Duration();\n    _data.active = model.active;\n    _data.display = model.display;\n    _data.id = model.id;\n    _data.price = model.price;\n    return _data;\n  }\n\n  getAll = (req: Request, res: Response) => {\n    Schema.find({ active: true }, (err, data) => {\n      if (err) return res.status(500).send({ message: err.message });\n      const _data = this.mapItems(data);\n      return res.status(200).send(_data);\n    });\n  };\n\n  getOne = (req: Request, res: Response) => {\n    try {\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      Schema.findById(req.params.id, (err, data: IDuration) => {\n        if (err) return res.status(500).send({ message: err.message });\n        const _data = this.mapItem(data);\n        return res.status(200).send(_data);\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  create = (req: Request, res: Response) => {\n    try {\n      if (!req.body || !req.body.description || !req.body.display) {\n        return res.status(400).send();\n      }\n\n      const _model = new Duration();\n      _model.id = uuid();\n      _model.active = true;\n      _model.display = req.body.display;\n      _model.price = req.body.price;\n\n      Schema.create(_model, (err: Error, data: IDuration) => {\n        if (err) return res.status(400).send({ message: err.message });\n        const _data = this.mapItem(data);\n        return res.status(201).send(_data);\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  update = (req: Request, res: Response) => {\n    try {\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      const price = req.body.price ? req.body.price : \"\";\n      const disp = req.body.display ? req.body.display : \"\";\n\n      if (price > 0 || disp.length == 0) {\n        return res\n          .status(400)\n          .send({ message: \"description or display is null or empty\" });\n      }\n\n      const _model = new Schema({\n        display: disp,\n        price: price\n      });\n\n      Schema.findByIdAndUpdate(req.params.id, _model, (err: Error) => {\n        if (err) return res.status(400).send({ message: err.message });\n        return res.status(200).send();\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  deactivate = (req: Request, res: Response) => {\n    try {\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      Schema.findByIdAndUpdate(\n        req.params.id,\n        { active: false },\n        (err: Error) => {\n          if (err) return res.status(400).send({ message: err.message });\n          return res.status(204).send();\n        }\n      );\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n}\n\nexport default new DurationController();\n","import { BaseRoute } from \"./baseRouter\";\nimport { Router} from \"express\";\nimport controller from \"../controllers/durationController\";\n\nexport class DurationRoute extends BaseRoute {\n   \n    constructor() {\n        super();\n    }\n\n    public static map(router: Router) {\n        router.get('/v1/admin/duration', controller.getAll);\n        router.get('/v1/admin/duration/:id', controller.getOne);\n        router.post('/v1/admin/duration', controller.create);\n        router.put('/v1/admin/duration/:id', controller.update);\n        router.delete('/v1/admin/duration/:id', controller.deactivate);\n    }\n}","import { IService } from \"./interfaces\";\nimport dataAccess from \"./dataAccess\";\nimport * as mongoose from \"mongoose\";\n\nexport class ServiceSchema {\n  id?: mongoose.Types.ObjectId;\n  service?: string;\n  description?: string;\n  shortDescription?: string;\n  active?: boolean;\n\n  public get schema(): mongoose.Schema {\n    const _schema = new mongoose.Schema(\n      {\n        id: {\n          type: String,\n          required: [true, \"is required\"],\n          index: true\n        },\n        description: {\n          type: String,\n          required: [true, \"is required\"]\n        },\n        shortDescription: {\n          type: String,\n          required: [true, \"is required\"]\n        },\n        active: {\n          type: Boolean,\n          required: [true, \"is required\"],\n          default: true,\n          index: true\n        }\n      },\n      { timestamps: true }\n    );\n\n    return _schema;\n  }\n}\n\nconst model = dataAccess.dbConnection.model<IService>(\n  \"Services\",\n  new ServiceSchema().schema\n);\nexport default model;\n","export default class ApiType {\n    id?: string;\n    description?: string;\n    shortDescription?: string;\n    active?: boolean;\n  }\n  ","import { Request, Response } from \"express\";\nimport * as uuid from \"uuid\";\nimport { IService } from \"../db/interfaces\";\nimport Schema from \"../db/serviceSchema\";\nimport Service from \"../models/service\";\n\nexport class ServiceController {\n  constructor() {}\n\n  private mapItems(model: IService[]): Service[] {\n    let _data = [];\n    for (let i = 0; i < model.length; i++) {\n      _data.push(this.mapItem(model[i]));\n    }\n    return _data;\n  }\n\n  private mapItem(model: IService): Service {\n    const _data = new Service();\n    _data.active = model.active;\n    _data.description = model.description;\n    _data.id = model.id;\n    _data.shortDescription = model.shortDescription;\n\n    return _data;\n  }\n\n  getAll = (req: Request, res: Response) => {\n    Schema.find({ active: true }, (err, data) => {\n      if (err) return res.status(500).send({ message: err.message });\n      const _data = this.mapItems(data);\n      return res.status(200).send(_data);\n    });\n  };\n\n  getOne = (req: Request, res: Response) => {\n    try {\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      Schema.findById(req.params.id, (err, data: IService) => {\n        if (err) return res.status(500).send({ message: err.message });\n        const _data = this.mapItem(data);\n        return res.status(200).send(_data);\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  create = (req: Request, res: Response) => {\n    try {\n      if (!req.body || !req.body.description || !req.body.shortDescription) {\n        return res.status(400).send();\n      }\n\n      const _model = new Service();\n      _model.id = uuid();\n      _model.active = true;\n      _model.description = req.body.description;\n      _model.shortDescription = req.body.shortDescription;\n\n      Schema.create(_model, (err: Error, data: IService) => {\n        if (err) return res.status(400).send({ message: err.message });\n        const _data = this.mapItem(data);\n        return res.status(201).send(_data);\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  update = (req: Request, res: Response) => {\n    try {\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      const description = req.body.description ? req.body.description : \"\";\n      const shortDesc = req.body.shortDescription\n        ? req.body.shortDescription\n        : \"\";\n\n      if (description.length == 0 || shortDesc.length == 0) {\n        return res\n          .status(400)\n          .send({ message: \"description is null or empty\" });\n      }\n\n      const _model = new Schema({\n        description: description,\n        shortDesc: shortDesc\n      });\n\n      Schema.findByIdAndUpdate(req.params.id, _model, (err: Error) => {\n        if (err) return res.status(400).send({ message: err.message });\n        return res.status(200).send();\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  deactivate = (req: Request, res: Response) => {\n    try {\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      Schema.findByIdAndUpdate(\n        req.params.id,\n        { active: false },\n        (err: Error) => {\n          if (err) return res.status(400).send({ message: err.message });\n          return res.status(204).send();\n        }\n      );\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n}\n\nexport default new ServiceController();\n","import { BaseRoute } from \"./baseRouter\";\nimport { Router} from \"express\";\nimport controller from \"../controllers/serviceController\";\n\nexport class ServiceRoute extends BaseRoute {\n   \n    constructor() {\n        super();\n    }\n\n    public static map(router: Router) {\n        router.get('/v1/admin/service', controller.getAll);\n        router.get('/v1/admin/service/:id', controller.getOne);\n        router.post('/v1/admin/service', controller.create);\n        router.put('/v1/admin/service/:id', controller.update);\n        router.delete('/v1/admin/service/:id', controller.deactivate);\n    }\n}","export default class ClientInfo {\n    hostname?: string;\n    ip?: string;\n    forwared?: string;\n  }\n  ","import { Request, Response } from \"express\";\nimport ClientInfo from \"../models/clientInfo\";\n\nexport class ClientInfoController {\n  constructor() {}\n\n  getAll = (req: Request, res: Response) => {\n    const _data = new ClientInfo();\n    _data.hostname = req.hostname;\n    _data.ip = req.connection.remoteAddress;\n    _data.forwared = req.headers.forwarded ? req.headers.forwarded : \"\";\n\n    return res.status(200).send(_data);\n  };\n}\n\nexport default new ClientInfoController();\n","import { BaseRoute } from \"./baseRouter\";\nimport { Router} from \"express\";\nimport controller from \"../controllers/clientController\";\n\nexport class ClientInfoRoute extends BaseRoute {\n   \n    constructor() {\n        super();\n    }\n\n    public static map(router: Router) {\n        router.get('/clientinfo', controller.getAll);\n    }\n}","export default class ValidClient {\n    id?: string;\n    ipAddress?: string;\n    name?: string;\n    description?: string;\n    contactName?: string;\n    email?: string;\n    phoneNumber?: number;\n    token?: string;\n    active?: boolean;\n  }\n  ","import { Request, Response } from \"express\";\nimport * as uuid from \"uuid\";\nimport { IValidClient } from \"../db/interfaces\";\nimport Schema from \"../db/validClientSchema\";\nimport ValidClient from \"../models/validClient\";\n\nexport class ValidClientController {\n  constructor() {}\n\n  private mapItems(model: IValidClient[]): ValidClient[] {\n    let _data = [];\n    for (let i = 0; i < model.length; i++) {\n      _data.push(this.mapItem(model[i]));\n    }\n    return _data;\n  }\n\n  private mapItem(model: IValidClient): ValidClient {\n    console.log(\"_id\", model._id);\n    const _data = new ValidClient();\n    _data.active = model.active;\n    _data.contactName = model.contactName;\n    _data.description = model.description;\n    _data.email = model.email;\n    _data.id = model.id;\n    _data.ipAddress = model.ipAddress;\n    _data.name = model.name;\n    _data.phoneNumber = model.phoneNumber;\n\n    return _data;\n  }\n\n  getAll = (req: Request, res: Response) => {\n    Schema.find({ active: true }, (err, data) => {\n      if (err) return res.status(500).send({ message: err.message });\n      const _data = this.mapItems(data);\n\n      return res.status(200).send(_data);\n    });\n  };\n\n  getOne = (req: Request, res: Response) => {\n    try {\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      Schema.findById(req.params.id, (err, data: IValidClient) => {\n        if (err) return res.status(500).send({ message: err.message });\n        const _data = this.mapItem(data);\n        return res.status(200).send(data);\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  create = (req: Request, res: Response) => {\n    try {\n      if (\n        !req.body.active ||\n        !req.body.contactname ||\n        !req.body.description ||\n        !req.body.email ||\n        !req.body.ipaddress ||\n        !req.body.name ||\n        !req.body.phonenumber\n      ) {\n        return res.status(400).send({ message: \"required data is missing\" });\n      }\n\n      const _model = new Schema({\n        id: uuid(),\n        active: true,\n        contactName: req.body.contactname,\n        description: req.body.description,\n        email: req.body.email,\n        ipAddress: req.body.ipaddress,\n        name: req.body.name,\n        phoneNumber: req.body.phonenumber\n      });\n\n      _model.generateValidationToken();\n\n      Schema.create(_model, (err: Error, data: IValidClient) => {\n        if (err) return res.status(400).send({ message: err.message });\n        const _data = this.mapItem(data);\n        return res.status(201).send(_data);\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  update = (req: Request, res: Response) => {\n    try {\n      if (\n        !req.body.contactname ||\n        !req.body.description ||\n        !req.body.email ||\n        !req.body.fdnq ||\n        !req.body.ipaddress ||\n        !req.body.name ||\n        !req.body.phonenumber\n      ) {\n        return res.status(400).send({ message: \"required data is missing\" });\n      }\n\n      const _model = new ValidClient();\n      _model.contactName = req.body.contactname;\n      _model.description = req.body.description;\n      _model.email = req.body.email;\n      _model.ipAddress = req.body.ipaddress;\n      _model.name = req.body.name;\n      _model.phoneNumber = req.body.phonenumber;\n\n      Schema.findByIdAndUpdate(req.params.id, _model, (err: Error) => {\n        if (err) return res.status(400).send({ message: err.message });\n        return res.status(200).send();\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  deactivate = (req: Request, res: Response) => {\n    try {\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      Schema.findByIdAndUpdate(\n        req.params.id,\n        { active: false, token: \"\" },\n        (err: Error) => {\n          if (err) return res.status(400).send({ message: err.message });\n          return res.status(204).send();\n        }\n      );\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n}\n\nexport default new ValidClientController();\n","import { BaseRoute } from \"./baseRouter\";\nimport { Router} from \"express\";\nimport controller from \"../controllers/validClientController\";\n\nexport class ValidClientRoute extends BaseRoute {\n   \n    constructor() {\n        super();\n    }\n\n    public static map(router: Router) {\n        router.get('/v1/admin/client', controller.getAll);\n        router.get('/v1/admin/client/:id', controller.getOne);\n        router.post('/v1/admin/client', controller.create);\n        router.put('/v1/admin/client/:id', controller.update);\n        router.delete('/v1/admin/client/:id', controller.deactivate);\n    }\n}","import UserType from \"./userType\";\n\nexport default class ApiUser {\n  id?: string;\n  username?: string;\n  email?: string;\n  firstName?: string;\n  lastName?: string;\n  userType?: UserType;\n  active?: boolean;\n  tokenValidated?: boolean;\n  validationToken?: string;\n}\n","import { Request, Response } from \"express\";\nimport * as uuid from \"uuid\";\nimport Schema from \"../db/apiUserSchema\";\nimport UserTypeSchema from \"../db/userTypeSchema\";\nimport { IApiUser } from \"../db/interfaces\";\nimport User from \"../models/apiUser\";\nimport UserType from \"../models/userType\";\nimport { BaseController } from \"./baseController\";\n\nexport class ApiUserController extends BaseController {\n  private username:string;\n  private email:string;\n  private firstName:string;\n  private lastName:string;\n  private password:string;\n  private type:string;\n\n  constructor() {\n    super();\n\n    this.username='';\n    this.email='';\n    this.firstName='';\n    this.lastName='';\n    this.password='';\n    this.type='';\n  }\n\n\n  private mapItems(model: {}[]): User[] {\n    let _data = [];\n\n    for (let i = 0; i < model.length; i++) {\n      _data.push(this.mapItem(model[i]));\n    }\n\n    return _data;\n  }\n\n  private mapItem(model: {}): User {\n    const _data = new User();\n    const _model = JSON.parse(JSON.stringify(model));\n    const _type = new UserType();\n\n    _type.id = this.encryptData(_model.userType[0].id);\n    _type.display = this.encryptData(_model.userType[0].display);\n    _type.description = this.encryptData(_model.userType[0].description);\n    _type.active = _model.userType[0].active;\n\n    _data.active = _model.active;\n    _data.email = this.encryptData(_model.email);\n    _data.firstName = this.encryptData(_model.firstName);\n    _data.id = this.encryptData(_model.id);\n    _data.lastName = this.encryptData(_model.lastName);\n    _data.tokenValidated = _model.tokenValidated;\n    _data.username = this.encryptData(_model.username);\n    _data.userType = _type;\n\n    return _data;\n  }\n\n  getAll = (req: Request, res: Response) => {\n    try {\n\n      Schema.aggregate([\n        { $match: {'active': true }},\n        { $lookup: {\n          from: 'usertypes',\n          localField: 'userTypeId',\n          foreignField: '_id',\n          as : 'userType'\n        }},\n        { $sort: {'username': 1}},\n        {$limit: 200}\n\n      ])\n      .exec((err: Error, data) => {\n        if (err) return res.status(400).send({ message: err.message });\n        const _data = this.mapItems(data);\n        return res.status(200).send(_data);\n      });\n      \n      return;\n      \n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  getOne = (req: Request, res: Response) => {\n    try {\n\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      Schema.aggregate([\n        { $match: {'id': req.params.id, 'active': true }},\n        { $lookup: {\n          from: 'usertypes',\n          localField: 'userTypeId',\n          foreignField: '_id',\n          as : 'userType'\n        }},\n        {$limit: 1}\n      ])\n      .exec((err: Error, data) => {\n        if (err) return res.status(400).send({ message: err.message });\n        const _data = this.mapItems(data);\n        return res.status(200).send(_data);\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  create = (req: Request, res: Response) => {\n    try {\n\n      if (\n        !req.body ||\n        !req.body.email ||\n        !req.body.firstName ||\n        !req.body.lastName ||\n        !req.body.username ||\n        !req.body.password\n      ) {\n        return res.status(400).send({ message: \"missing data item(s)\" });\n      }\n\n      let _targetType='';\n\n      this.email = req.body.email;\n      this.firstName = req.body.firstName;\n      this.lastName = req.body.lastName;\n      this.username = req.body.username;\n      this.password = req.body.password;\n      this.type = req.body.type;\n\n      if(this.email == ''){\n        return res.status(400).send({message: 'failed to decrypt'});\n      }\n\n      UserTypeSchema.findOne({ active: true, 'display': this.type }, (err, data) => {\n\n        if (err) return res.status(400).send({ message: err.message });\n        \n        if(data) _targetType = data._id;\n        \n        return;\n\n      }).then(() => {\n\n        if(_targetType) {\n\n          const _model = new Schema({\n            id: uuid(),\n            email: this.email,\n            firstName: this.firstName,\n            lastName: this.lastName,\n            username: this.username,\n            userTypeId: _targetType,\n          });\n\n          if (!_model.setPassword(this.password)) {\n            return res\n              .status(400)\n              .send({ message: \"password does not match criteria\" });\n          }\n\n          if (!_model.generateValidationToken()) {\n            return res\n              .status(400)\n              .send({ message: \"error occured while generating token\" });\n          }\n\n          Schema.create(_model, (err: Error, data: IApiUser) => {\n            if (err) return res.status(400).send({ message: err.message });\n            return res.status(201).send({message: 'created'});\n          });\n\n        }\n\n        return;\n\n      });\n\n      return;\n     \n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  update = (req: Request, res: Response) => {\n    try {\n\n      if (!req.params || !req.params.id) {\n        return res.status(400).send({ message: \"target id is invalid\" });\n      }\n\n      if (\n        !req.body ||\n        !req.body.firstName ||\n        !req.body.lastName ||\n        !req.body.username\n      ) {\n        return res.status(400).send();\n      }\n\n      const _firstName = req.body.firstName ? req.body.firstName : \"\";\n      const _lastName = req.body.lastName ? req.body.lastName : \"\";\n\n      if (_firstName.length == 0 || _lastName.length == 0) {\n        return res\n          .status(400)\n          .send({ message: \"missing and null or empty data\" });\n      }\n\n      const _model = new Schema({\n        firstName: _firstName,\n        lastName: _lastName\n      });\n\n      Schema.findByIdAndUpdate({'id': req.params.id }, _model, (err: Error) => {\n        if (err) return res.status(400).send({ message: err.message });\n        return res.status(200).send();\n      });\n\n      return;\n\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  deactivate = (req: Request, res: Response) => {\n    try {\n\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      Schema.findByIdAndUpdate(\n        req.params.id,\n        { active: false },\n        (err: Error) => {\n          if (err) return res.status(400).send({ message: err.message });\n          return res.status(204).send({message: 'deactivated'});\n        }\n      );\n\n      return;\n\n    } catch (err) {\n      return res.send(400).send({ message: err.message });\n    }\n  };\n}\n\nexport default new ApiUserController();\n","import { BaseRoute } from \"./baseRouter\";\nimport { Router} from \"express\";\nimport controller from \"../controllers/apiUserController\";\n\nexport class ApiUserRoute extends BaseRoute {\n   \n    constructor() {\n        super();\n    }\n\n    public static map(router: Router) {\n        router.get('/v1/apiuser', controller.getAll);\n        router.get('/v1/apiuser/:id', controller.getOne);\n        router.post('/v1/apiuser', controller.create);\n        router.put('/v1/apiuser/:id', controller.update);\n        router.delete('/v1/apiuser/:id', controller.deactivate);\n    }\n}","import { Request, Response } from \"express\";\nimport * as jwt from \"jsonwebtoken\";\nimport * as configInfo from \"../config/db.config.json\";\nimport Schema from \"../db/apiUserSchema\";\nimport { IApiUser, IDecoded } from \"../db/interfaces\";\nimport { BaseController } from \"./baseController\";\n\n\nexport class loginController extends BaseController{\n  private username:string;\n  private password:string;\n\n  constructor() {\n    super()\n    this.username='';\n    this.password='';\n  }\n\n  login = (req: Request, res: Response) => {\n    \n    try {\n\n      if (!req.body.username || !req.body.password) {\n        return res.status(400).send();\n      }\n\n      this.username = this.decryptData(req.body.username);\n      this.password = this.decryptData(req.body.password);\n\n      Schema.findOne({ username: this.username }).exec(\n        (err: Error, data: IApiUser) => {\n          if (err) return res.status(400).send({ message: err.message });\n\n          if (data) {\n            if (!data.validPassword(this.password)) {\n              return res\n                .status(400)\n                .send({ message: \"either username or password in incorrect!\" });\n            }\n\n            if (!data.tokenValidated) {\n              return res\n                .status(301)\n                .send({ message: \"please validate your email\" });\n            }\n\n            return res.status(200).send({ message: \"Welcome back!\" });\n          }\n\n          return res.status(400).send({ message: \"user does not exist\" });\n        }\n      );\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  resetPassword = (req: Request, res: Response) => {\n    try {\n      if (!req.body.username || !req.body.password) {\n        return res.status(400).send();\n      }\n\n      Schema.findOne({ username: req.body.user }).exec(\n        (err: Error, data: IApiUser) => {\n          if (err) return res.status(400).send({ message: err.message });\n\n          if (data) {\n            if (!data.setPassword(req.body.password)) {\n              return res\n                .status(400)\n                .send(\"either username or password in incorrect!\");\n            } else {\n              Schema.findByIdAndUpdate(\n                data._id,\n                { salt: data.salt, password_hash: data.password_hash },\n                (err: Error) => {\n                  if (err)\n                    return res.status(400).send({ message: err.message });\n                  return res.status(200).send();\n                }\n              );\n            }\n          }\n\n          return res.status(417).send();\n        }\n      );\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  validateEmailToken = (req: Request, res: Response) => {\n    try {\n      if (!req.params.token) {\n        return res.status(400).send();\n      }\n\n      const _decoded = <IDecoded>(\n        jwt.verify(req.params.token, configInfo.secret)\n      );\n\n      if (!_decoded) {\n        return res.status(400).send({ message: \"decoding failure\" });\n      } else {\n        if (_decoded.exp > Date.now() / 1000) {\n          Schema.findByIdAndUpdate(\n            _decoded.id,\n            { tokenValidated: true },\n            (err: Error) => {\n              if (err) return res.status(400).send(err.message);\n\n              return res.status(200).send();\n            }\n          );\n        }\n\n        return res.status(400).send({ message: \"Token expired\" });\n      }\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n}\n\nexport default new loginController();\n","import { BaseRoute } from \"./baseRouter\";\nimport { Router} from \"express\";\nimport controller from \"../controllers/loginController\";\n\nexport class LoginRoute extends BaseRoute {\n   \n    constructor() {\n        super();\n    }\n\n    public static map(router: Router) {\n        router.post('/v1/login/:token', controller.validateEmailToken);\n        router.post('/v1/login', controller.login);\n        router.post('/v1/resetpass', controller.resetPassword);\n    }\n}","import { Request, Response } from \"express\";\nimport * as uuid from \"uuid\";\nimport { IUserType } from \"../db/interfaces\";\nimport Schema from \"../db/userTypeSchema\";\nimport UserType from \"../models/userType\";\n\nexport class UserTypeController {\n  constructor() {}\n\n  private mapItems(model: IUserType[]): UserType[] {\n    let _data = [];\n    for (let i = 0; i < model.length; i++) {\n      _data.push(this.mapItem(model[i]));\n    }\n    return _data;\n  }\n\n  private mapItem(model: IUserType): UserType {\n    console.log(\"type: \" + model.display, model._id);\n    const _data = new UserType();\n    _data.active = model.active;\n    _data.description = model.description;\n    _data.display = model.display;\n    _data.id = model.id;\n\n    return _data;\n  }\n\n  getAll = (req: Request, res: Response) => {\n    Schema.find({ active: true }, (err, data) => {\n      if (err) return res.status(500).send({ message: err.message });\n      console.log('data', data);\n      const _data = this.mapItems(data);\n      return res.status(200).send(_data);\n    });\n  };\n\n  getOne = (req: Request, res: Response) => {\n    try {\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      Schema.findById(req.params.id, (err, data: IUserType) => {\n        if (err) return res.status(500).send({ message: err.message });\n        const _data = this.mapItem(data);\n        return res.status(200).send(_data);\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  create = (req: Request, res: Response) => {\n    try {\n      if (!req.body || !req.body.description || !req.body.display) {\n        return res.status(400).send();\n      }\n\n      const _model = new UserType();\n      _model.id = uuid();\n      _model.description = req.body.description;\n      _model.display = req.body.display;\n      _model.active = true;\n\n      Schema.create(_model, (err: Error, data: IUserType) => {\n        if (err) return res.status(400).send({ message: err.message });\n        const _data = this.mapItem(data);\n        return res.status(201).send(_data);\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  update = (req: Request, res: Response) => {\n    try {\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      const desc = req.body.description ? req.body.description : \"\";\n      const disp = req.body.display ? req.body.display : \"\";\n\n      if (desc.length == 0 || disp.length == 0) {\n        return res\n          .status(400)\n          .send({ message: \"description or display is null or empty\" });\n      }\n\n      const _userType = {\n        description: desc,\n        display: disp\n      };\n\n      Schema.findByIdAndUpdate(req.params.id, _userType, (err: Error) => {\n        if (err) return res.status(400).send({ message: err.message });\n        return res.status(200).send();\n      });\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n\n  deactivate = (req: Request, res: Response) => {\n    try {\n      if (!req.params || !req.params.id) {\n        return res.status(400).send();\n      }\n\n      Schema.findByIdAndUpdate(\n        req.params.id,\n        { active: false },\n        (err: Error) => {\n          if (err) return res.status(400).send({ message: err.message });\n          return res.status(204).send();\n        }\n      );\n\n      return;\n    } catch (err) {\n      return res.status(400).send({ message: err.message });\n    }\n  };\n}\n\nexport default new UserTypeController();\n","import { BaseRoute } from \"./baseRouter\";\nimport { Router} from \"express\";\nimport controller from \"../controllers/userTypeController\";\n\nexport class UserTypeRoute extends BaseRoute {\n   \n    constructor() {\n        super();\n    }\n\n    public static map(router: Router) {\n        router.get('/v1/admin/usertype', controller.getAll);\n        router.get('/v1/admin/usertype/:id', controller.getOne);\n        router.post('/v1/admin/usertype', controller.create);\n        router.put('/v1/admin/usertype/:id', controller.update);\n        router.delete('/v1/admin/usertype/:id', controller.deactivate);\n    }\n}","import app from './app'\n\nconst port = 3001;\nconst host = '127.0.0.1';\n\napp.run(port, host);\n","module.exports = require(\"mail\");"],"sourceRoot":""}